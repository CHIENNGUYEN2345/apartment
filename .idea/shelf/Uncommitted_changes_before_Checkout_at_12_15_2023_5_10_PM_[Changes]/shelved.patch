Index: app/CRMDV/routes/web.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nRoute::get('/', function () {\r\n    /*$bills = \\Modules\\WebBill\\Models\\Bill::all();\r\n    foreach ($bills as $bill) {\r\n        $bill->registration_date = $bill->created_at;\r\n        $bill->save();\r\n    }\r\n    die('ok');*/\r\n    return redirect('/admin');\r\n});\r\n\r\n\r\n\r\n\r\nRoute::get('check_error_link', function() {\r\n\r\n    $scan = new \\App\\CRMDV\\Controllers\\Helpers\\CRMDVHelper();\r\n    $x = $scan::send_mail_notifications(null);\r\n    dd($x);\r\n\r\n    // \\Modules\\WebBill\\Models\\Admin::where('id', 1)->update(['password' => bcrypt('Hbweb!23')]);\r\n    // die('ok');\r\n\r\n    $scan = new App\\Console\\CRMDV\\ScanErrorLink();\r\n    $scan->handle();\r\n    die('ok');\r\n\r\n\r\n    App\\CRMDV\\Controllers\\Helpers\\CRMDVHelper::send_mail_notifications([3603]);\r\n    die('ok');\r\n});\r\n\r\n\r\n\r\nRoute::get('kho-giao-dien/{admin_id}/ldp', '\\App\\CRMDV\\Controllers\\Frontend\\CodeController@userLandingpage');\r\nRoute::get('kho-giao-dien/landingpage', '\\App\\CRMDV\\Controllers\\Frontend\\CodeController@landingpage');\r\nRoute::get('mau-landingpage/view', function() {\r\n    return view('CRMDV.frontend.pages.code.view_landingpage');\r\n});\r\nRoute::get('kho-giao-dien/wordpress', '\\App\\CRMDV\\Controllers\\Frontend\\CodeController@wordpress');\r\n//  https://khoweb-top.translate.goog/themes/en/wordpress?_x_tr_sl=vi&_x_tr_tl=en&_x_tr_hl=vi&_x_tr_pto=wapp\r\nRoute::get('themes/{lang}/wordpress', '\\App\\CRMDV\\Controllers\\Frontend\\CodeController@wordpressTrans');\r\nRoute::get('mau-web/{id}', '\\App\\CRMDV\\Controllers\\Frontend\\CodeController@wordpressDemo');\r\nRoute::get('kho-giao-dien/app', '\\App\\CRMDV\\Controllers\\Frontend\\CodeController@app');\r\nRoute::get('kho-giao-dien/app/{id}', '\\App\\CRMDV\\Controllers\\Frontend\\CodeController@appDetail');\r\n\r\nRoute::get('lead-report', function() {\r\n    return view('CRMDV.lead.emails.tien_do_cong_viec');\r\n});\r\nRoute::post('/admin/lead/lead-contacted-log', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@ajaxLeadContactedLog');\r\n\r\nRoute::get('admin/update-daily-work-report', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@updateDailyWorkReport');  //  cập nhật bao cáo công việc hằng ngày của từng thành viên\r\n\r\nRoute::group(['prefix' => 'admin', 'middleware' => ['guest:admin', 'get_permissions']], function () {\r\n\r\n    Route::get('cancel-extension', '\\App\\CRMDV\\Controllers\\Admin\\BillController@cancelExtension')->name('dashboard.cancel_extension')->middleware('permission:bill_edit');\r\n    Route::group(['prefix' => 'bill'], function () {\r\n        Route::get('test', '\\App\\CRMDV\\Controllers\\Admin\\BillController@test');\r\n        Route::get('ko-duy-tri', '\\App\\CRMDV\\Controllers\\Admin\\BillController@koDuyTri');\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\BillController@getIndex')->name('bill')->middleware('permission:bill_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\BillController@getPublish')->name('bill.publish')->middleware('permission:bill_publish');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\BillController@add')->middleware('permission:bill_add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\BillController@delete')->middleware('permission:bill_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\BillController@multiDelete')->middleware('permission:bill_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\BillController@searchForSelect2')->name('bill.search_for_select2')->middleware('permission:bill_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\BillController@update')->middleware('permission:bill_view');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\BillController@update')->middleware('permission:bill_edit');\r\n\r\n    });\r\n\r\n    //  User\r\n    Route::group(['prefix' => 'user'], function () {\r\n        Route::get('ajax-get-info', '\\App\\CRMDV\\Controllers\\Admin\\UserController@ajaxGetInfo');\r\n        Route::get('check-exist', '\\App\\CRMDV\\Controllers\\Admin\\UserController@checkExist');\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\UserController@getIndex')->name('user')->middleware('permission:user_view');\r\n\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\UserController@add')->middleware('permission:user_add');\r\n\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\UserController@update')->middleware('permission:user_view');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\UserController@update')->middleware('permission:user_edit');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\UserController@delete')->middleware('permission:user_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\UserController@multiDelete')->middleware('permission:user_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\UserController@searchForSelect2')->name('user.search_for_select2')->middleware('permission:user_view');\r\n\r\n    });\r\n\r\n    //  Thu - chi\r\n    Route::group(['prefix' => 'receipt_payment'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\ReceiptPaymentController@getIndex')->name('dh_bill')->middleware('permission:receipts_publish');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\ReceiptPaymentController@getPublish')->name('dh_bill.publish')->middleware('permission:receipts_publish');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\ReceiptPaymentController@add')->middleware('permission:receipts_publish');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\ReceiptPaymentController@delete')->middleware('permission:bill_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\ReceiptPaymentController@multiDelete')->middleware('permission:bill_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\ReceiptPaymentController@searchForSelect2')->name('dh_bill.search_for_select2')->middleware('permission:receipts_publish');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\ReceiptPaymentController@update')->middleware('permission:receipts_publish');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\ReceiptPaymentController@update')->middleware('permission:receipts_publish');\r\n\r\n    });\r\n\r\n    Route::get('del', '\\App\\CRMDV\\Controllers\\Admin\\BillController@del')->middleware('permission:bill_delete');\r\n\r\n    //  Dịch vụ\r\n    Route::group(['prefix' => 'service'], function () {\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\ServiceController@getIndex')->name('service')->middleware('permission:service');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\ServiceController@add')->middleware('permission:service');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\ServiceController@delete')->middleware('permission:service');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\ServiceController@multiDelete')->middleware('permission:service');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\ServiceController@searchForSelect2')->name('service.search_for_select2')->middleware('permission:service');\r\n\r\n        Route::get('get-info', '\\App\\CRMDV\\Controllers\\Admin\\ServiceController@get_info')->middleware('permission:service');\r\n\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\ServiceController@update')->middleware('permission:service');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\ServiceController@update')->middleware('permission:service');\r\n    });\r\n\r\n    //  Thống kê\r\n    Route::group(['prefix' => 'dashboard'], function () {\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\DashboardController@dashboardSoftware');\r\n        Route::get('ds-ky-thuat', '\\App\\CRMDV\\Controllers\\Admin\\DashboardController@dsKyThuat');\r\n    });\r\n\r\n\r\n\r\n    //  Admin\r\n    Route::group(['prefix' => 'admin'], function () {\r\n\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@getIndex')->name('admin')->middleware('permission:admin_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@getPublish')->name('admin.admin_publish')->middleware('permission:admin_edit');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@add')->middleware('permission:admin_add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@delete')->middleware('permission:admin_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@multiDelete')->middleware('permission:admin_delete');\r\n\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@searchForSelect2')->name('admin.search_for_select2');\r\n        Route::get('search-for-select2-all', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@searchForSelect2All')->middleware('permission:admin_view');\r\n        Route::get('ajax-get-info', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@ajaxGetInfo');\r\n\r\n\r\n\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@update')->middleware('permission:admin_view');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@update')->middleware('permission:admin_edit');\r\n    });\r\n\r\n    //  Hr xem tk admin\r\n    Route::get('invite/search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@searchForSelect2')->name('admin.search_for_select2');\r\n    Route::group(['prefix' => 'hradmin'], function () {\r\n        Route::get('hieu-suat-cong-viec', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@hieuSuatCongViec');\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\HRAdminController@getIndex')->name('admin')->middleware('permission:hradmin_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\HRAdminController@getPublish')->name('admin.admin_publish')->middleware('permission:hradmin_edit');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\HRAdminController@add')->middleware('permission:hradmin_add');\r\n        // Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\HRAdminController@delete')->middleware('permission:hradmin_delete');\r\n        // Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\HRAdminController@multiDelete')->middleware('permission:hradmin_delete');\r\n\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\HRAdminController@update')->middleware('permission:hradmin_view');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\HRAdminController@update')->middleware('permission:hradmin_edit');\r\n    });\r\n\r\n    //nhắc nhở\r\n    Route::group(['prefix' => 'remind'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\RemindController@getIndex')->name('remind')->middleware('permission:remind');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\RemindController@getPublish')->name('remind.publish')->middleware('permission:remind');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\RemindController@add')->middleware('permission:remind');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\RemindController@delete')->middleware('permission:remind');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\RemindController@multiDelete')->middleware('permission:remind');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\RemindController@searchForSelect2')->name('remind.search_for_select2')->middleware('permission:remind');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\RemindController@update')->middleware('permission:remind');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\RemindController@update')->middleware('permission:remind');\r\n\r\n    });\r\n\r\n    //  Lịch sử gia hạn\r\n    Route::group(['prefix' => 'bill_histories'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\BillHistoryController@getIndex')->name('bill_histories');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\BillHistoryController@getPublish')->name('bill_histories.publish');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\BillHistoryController@add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\BillHistoryController@delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\BillHistoryController@multiDelete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\BillHistoryController@searchForSelect2')->name('bill_histories.search_for_select2');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\BillHistoryController@update');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\BillHistoryController@update');\r\n\r\n    });\r\n\r\n    //  Website  da lam\r\n    Route::group(['prefix' => 'codes'], function () {\r\n\r\n        Route::get('update-bill-to-codes', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@updateBillToCode');\r\n        Route::get('backup-to-html', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@backupToHtml');\r\n\r\n        Route::match(array('GET', 'POST'), 'check-web-server', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@checkWebServer');\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@getIndex')->name('codes')->middleware('permission:codes_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@getPublish')->name('codes.publish')->middleware('permission:codes_edit');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@add')->middleware('permission:codes_add');\r\n        Route::match(array('GET', 'POST'), 'quick-add', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@quickAdd')->middleware('permission:codes_add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@delete')->middleware('permission:codes_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@multiDelete')->middleware('permission:codes_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@searchForSelect2')->name('codes.search_for_select2')->middleware('permission:codes_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@update')->middleware('permission:codes_view');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CodesController@update')->middleware('permission:codes_edit');\r\n\r\n    });\r\n\r\n\r\n    // lead\r\n\r\n    Route::group(['prefix' => 'lead'], function () {\r\n        Route::get('test', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@test');\r\n\r\n        Route::get('tooltip-info', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@tooltipInfo');\r\n        Route::get('lead-huong-dan', function() {\r\n            return view('CRMDV.lead.huong_dan');\r\n        });\r\n        Route::get('check-exist', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@checkExist');\r\n\r\n        Route::get('gui-mail-tien-do-cong-viec', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@sendMail');\r\n        Route::match(array('GET', 'POST'), 'import-excel', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@importExcel');\r\n\r\n        Route::get('admin-search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@adminSearchForSelect2')->middleware('permission:lead_edit');\r\n\r\n        Route::post('ajax-update', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@ajaxUpdate')->middleware('permission:lead_edit');\r\n        Route::post('assign', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@leadAssign')->middleware('permission:lead_assign');\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@getIndex')->name('lead')->middleware('permission:lead_view');\r\n        Route::get('/tha-noi', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@getIndex')->name('lead')->middleware('permission:lead_float_view');\r\n\r\n        Route::get('/doi-tac', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@doiTac')->name('lead')->middleware('permission:lead_view');\r\n\r\n        Route::get('/quan-tam-moi', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@getIndex')->name('lead')->middleware('permission:lead_view');\r\n        Route::get('/telesale', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@getIndex')->name('lead')->middleware('permission:lead_view'); //  khách đã quan tâm của telesale gọi\r\n\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@getPublish')->name('lead.publish')->middleware('permission:lead_edit');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@add')->middleware('permission:lead_add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@delete')->middleware('permission:lead_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@multiDelete')->middleware('permission:lead_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@searchForSelect2')->name('lead.search_for_select2')->middleware('permission:lead_view');\r\n\r\n        Route::post('edit', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@update')->middleware('permission:lead_edit');\r\n\r\n    });\r\n\r\n\r\n    // Trưởng phòng xem lead\r\n\r\n    Route::group(['prefix' => 'tp-lead'], function () {\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\TPLeadController@getIndex')->name('truong_phong')->middleware('permission:truong_phong');\r\n    });\r\n\r\n    // MKT xem lead\r\n\r\n    Route::group(['prefix' => 'mkt-lead'], function () {\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\MKTLeadController@getIndex')->name('mkt_lead')->middleware('permission:mktlead_view');\r\n    });\r\n\r\n\r\n    Route::group(['prefix' => 'lead_bep'], function () {\r\n\r\n        Route::get('tooltip-info', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@tooltipInfo');\r\n\r\n        Route::get('check-exist', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@checkExist');\r\n\r\n        Route::match(array('GET', 'POST'), 'import-excel', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@importExcel');\r\n\r\n        Route::get('admin-search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@adminSearchForSelect2')->middleware('permission:lead_edit');\r\n\r\n        Route::post('ajax-update', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@ajaxUpdate')->middleware('permission:lead_edit');\r\n        Route::post('assign', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@leadAssign')->middleware('permission:lead_assign');\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@getIndex')->name('lead_bep')->middleware('permission:lead_view');\r\n        Route::get('/tha-noi', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@getIndex')->name('lead_bep')->middleware('permission:lead_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@getPublish')->name('lead_bep.publish')->middleware('permission:lead_edit');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@add')->middleware('permission:lead_add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@delete')->middleware('permission:lead_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@multiDelete')->middleware('permission:lead_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@searchForSelect2')->name('lead_bep.search_for_select2')->middleware('permission:lead_view');\r\n        Route::get('edit', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@update')->middleware('permission:lead_edit');\r\n        Route::post('edit', '\\App\\CRMDV\\Controllers\\Admin\\LeadBepController@update')->middleware('permission:lead_edit');\r\n\r\n    });\r\n\r\n\r\n    // đào tạo\r\n    Route::group(['prefix' => 'course'], function () {\r\n        Route::get('view', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@getView')->middleware('permission:course_view');\r\n    });\r\n    Route::group(['prefix' => 'course'], function () {\r\n        Route::get('view/{category_id}', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@view')->middleware('permission:course_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@getPublish')->name('course.publish')->middleware('permission:course');\r\n        Route::get('view/{category_id}/publish', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@getPublish')->name('course.publish')->middleware('permission:course');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@add')->middleware('permission:course');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@delete')->middleware('permission:course');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@multiDelete')->middleware('permission:course');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@searchForSelect2')->name('course.search_for_select2')->middleware('permission:course_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@update');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@update')->middleware('permission:course');\r\n        Route::get('{id}/duplicate', '\\App\\CRMDV\\Controllers\\Admin\\CourseController@duplicate')->middleware('permission:course');\r\n    });\r\n    Route::group(['prefix' => 'category_course'], function () {\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\CategoryCourseController@getIndex')->middleware('permission:course');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\CategoryCourseController@getPublish')->name('category_course.publish')->middleware('permission:course');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\CategoryCourseController@add')->middleware('permission:course');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CategoryCourseController@delete')->middleware('permission:course');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\CategoryCourseController@multiDelete')->middleware('permission:course');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\CategoryCourseController@searchForSelect2')->name('category_course.search_for_select2')->middleware('permission:course');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CategoryCourseController@update')->middleware('permission:course');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CategoryCourseController@update')->middleware('permission:course');\r\n        Route::get('{id}/duplicate', '\\App\\CRMDV\\Controllers\\Admin\\CategoryCourseController@duplicate')->middleware('permission:course');\r\n    });\r\n\r\n    // Tài liệu giảng dạy\r\n    Route::group(['prefix' => 'document'], function () {\r\n        Route::get('view/{category_id}', '\\App\\CRMDV\\Controllers\\Admin\\DocumentController@view')->middleware('permission:document_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\DocumentController@getPublish')->name('document.publish')->middleware('permission:document');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\DocumentController@add')->middleware('permission:document');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\DocumentController@delete')->middleware('permission:document');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\DocumentController@multiDelete')->middleware('permission:document');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\DocumentController@searchForSelect2')->name('document.search_for_select2')->middleware('permission:document_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\DocumentController@update')->middleware('permission:document');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\DocumentController@update')->middleware('permission:document');\r\n    });\r\n    Route::group(['prefix' => 'category_document'], function () {\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\CategoryDocumentController@getIndex')->middleware('permission:document');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\CategoryDocumentController@getPublish')->name('category_document.publish')->middleware('permission:document');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\CategoryDocumentController@add')->middleware('permission:document');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CategoryDocumentController@delete')->middleware('permission:document');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\CategoryDocumentController@multiDelete')->middleware('permission:document');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\CategoryDocumentController@searchForSelect2')->name('category_document.search_for_select2')->middleware('permission:document');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CategoryDocumentController@update')->middleware('permission:document');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CategoryDocumentController@update')->middleware('permission:document');\r\n    });\r\n\r\n\r\n    //  chấm công\r\n    Route::group(['prefix' => 'timekeeping'], function () {\r\n        Route::match(array('GET', 'POST'), 'import-excel', '\\App\\CRMDV\\Controllers\\Admin\\TimekeepingController@importExcel')->middleware('permission:timekeeper_edit');\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\TimekeepingController@getIndex')->middleware('permission:timekeeping_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\TimekeepingController@getPublish')->name('timekeeping.publish')->middleware('permission:timekeeping_edit');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\TimekeepingController@add')->middleware('permission:timekeeping_add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\TimekeepingController@delete')->middleware('permission:timekeeping_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\TimekeepingController@multiDelete')->middleware('permission:timekeeping_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\TimekeepingController@searchForSelect2')->name('timekeeping.search_for_select2')->middleware('permission:timekeeping_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\TimekeepingController@update')->middleware('permission:timekeeping_edit');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\TimekeepingController@update')->middleware('permission:timekeeping_edit');\r\n    });\r\n\r\n\r\n    //  CSKH\r\n    Route::group(['prefix' => 'cskh-bill'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\CSKHBillController@getIndex')->name('cskh-bill')->middleware('permission:cskh-bill_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\CSKHBillController@getPublish')->name('cskh-bill.publish')->middleware('permission:bill_publish');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\CSKHBillController@searchForSelect2')->name('cskh-bill.search_for_select2')->middleware('permission:cskh-bill_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\CSKHBillController@update')->middleware('permission:cskh-bill_view');\r\n        Route::get('{id}/bo-cham-soc-lan-nay', '\\App\\CRMDV\\Controllers\\Admin\\CSKHBillController@boChamSocLanNay')->middleware('permission:cskh-bill_view');\r\n\r\n\r\n    });\r\n\r\n    //  Gia hạn HĐ\r\n    Route::group(['prefix' => 'gh-bill'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\GHBillController@getIndex')->name('gh-bill')->middleware('permission:cskh-bill_view');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\GHBillController@searchForSelect2')->name('gh-bill.search_for_select2')->middleware('permission:cskh-bill_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\BillController@getPublish')->name('bill.publish')->middleware('permission:bill_publish');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\GHBillController@update')->middleware('permission:cskh-bill_view');\r\n    });\r\n\r\n    //  Điều hành\r\n    Route::group(['prefix' => 'dhbill'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\DHBillController@getIndex')->name('dh_bill')->middleware('permission:dhbill_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\DHBillController@getPublish')->name('dh_bill.publish')->middleware('permission:dhbill_publish');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\DHBillController@add')->middleware('permission:dhbill_add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\DHBillController@delete')->middleware('permission:dhbill_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\DHBillController@multiDelete')->middleware('permission:dhbill_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\DHBillController@searchForSelect2')->name('dh_bill.search_for_select2')->middleware('permission:dhbill_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\DHBillController@update')->middleware('permission:dhbill_view');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\DHBillController@update')->middleware('permission:dhbill_edit');\r\n        Route::post('change-status', '\\App\\CRMDV\\Controllers\\Admin\\DHBillController@changeStatus')->middleware('permission:super_admin');\r\n\r\n    });\r\n\r\n    //  Lịch sử thay đổi triển khai hợp đồng\r\n    Route::group(['prefix' => 'bill_progress_history'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\BillProgressHistoryController@getIndex')->name('bill_progress_history');\r\n        Route::get('ajax-lich-su-trang-thai', '\\App\\CRMDV\\Controllers\\Admin\\BillProgressHistoryController@ajaxLichSuTrangThai');\r\n        Route::get('ajax-load-table-basic-data', '\\App\\CRMDV\\Controllers\\Admin\\BillProgressHistoryController@ajaxLoadTableBasicData');\r\n    });\r\n\r\n    //  Trưởng phòng sale\r\n    Route::group(['prefix' => 'tpbill'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\TPBillController@getIndex')->name('dh_bill')->middleware('permission:truong_phong');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\TPBillController@searchForSelect2')->name('dh_bill.search_for_select2')->middleware('permission:dhbill_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\TPBillController@update')->middleware('permission:truong_phong');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\TPBillController@update')->middleware('permission:truong_phong');\r\n\r\n    });\r\n\r\n    //  kế hoạch plan\r\n    Route::group(['prefix' => 'plan'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\PlanController@getIndex')->name('dh_bill')->middleware('permission:plan_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\PlanController@getPublish')->name('dh_bill.publish')->middleware('permission:plan_publish');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\PlanController@add')->middleware('permission:plan_add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\PlanController@delete')->middleware('permission:plan_delete');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\PlanController@multiDelete')->middleware('permission:plan_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\PlanController@searchForSelect2')->name('dh_bill.search_for_select2')->middleware('permission:plan_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\PlanController@update')->middleware('permission:plan_view');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\PlanController@update')->middleware('permission:plan_edit');\r\n\r\n    });\r\n\r\n\r\n    //  phiếu thu\r\n    Route::group(['prefix' => 'bill_receipts'], function () {\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\BillReceiptsController@getIndex')->name('dh_bill')->middleware('permission:bill_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\BillReceiptsController@getPublish')->name('dh_bill.publish')->middleware('permission:receipts_publish');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\BillReceiptsController@add')->middleware('permission:bill_add');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\BillReceiptsController@delete')->middleware('permission:bill_view');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\BillReceiptsController@multiDelete')->middleware('permission:bill_delete');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\BillReceiptsController@searchForSelect2')->name('dh_bill.search_for_select2')->middleware('permission:plan_view');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\BillReceiptsController@update')->middleware('permission:bill_view');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\BillReceiptsController@update')->middleware('permission:bill_edit');\r\n\r\n    });\r\n\r\n    //  Dữ liệu chấm công\r\n    Route::group(['prefix' => 'timekeeper'], function () {\r\n\r\n        Route::match(array('GET', 'POST'), 'import-excel', '\\App\\CRMDV\\Controllers\\Admin\\TimekeeperController@importExcel')->middleware('permission:timekeeper_edit');\r\n\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\TimekeeperController@getIndex')->name('timekeeper')->middleware('permission:timekeeper_view');\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\TimekeeperController@getPublish')->name('timekeeper.publish')->middleware('permission:timekeeper_edit');\r\n        Route::get('bao-cao', '\\App\\CRMDV\\Controllers\\Admin\\TimekeeperController@baoCao');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\TimekeeperController@add')->middleware('permission:timekeeper_edit');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\TimekeeperController@delete')->middleware('permission:timekeeper_edit');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\TimekeeperController@multiDelete')->middleware('permission:timekeeper_edit');\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\TimekeeperController@update')->middleware('permission:timekeeper_view');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\TimekeeperController@update')->middleware('permission:timekeeper_view');\r\n\r\n    });\r\n\r\n    //  phiếu phạt\r\n    Route::group(['prefix' => 'penalty_ticket'], function () {\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\PenaltyTicketController@getIndex')->name('penalty_ticket');\r\n        Route::match(array('GET', 'POST'), 'add', '\\App\\CRMDV\\Controllers\\Admin\\PenaltyTicketController@add')->middleware('permission:penalty_ticket');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\PenaltyTicketController@delete')->middleware('permission:super_admin');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\PenaltyTicketController@multiDelete')->middleware('permission:super_admin');\r\n        Route::get('search-for-select2', '\\App\\CRMDV\\Controllers\\Admin\\PenaltyTicketController@searchForSelect2')->name('penalty_ticket.search_for_select2');\r\n\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\PenaltyTicketController@getPublish')->name('penalty_ticket.publish');\r\n\r\n        Route::get('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\PenaltyTicketController@update')->middleware('permission:penalty_ticket');\r\n        Route::post('edit/{id}', '\\App\\CRMDV\\Controllers\\Admin\\PenaltyTicketController@update')->middleware('permission:penalty_ticket');\r\n    });\r\n\r\n    //  Báo cáo website lỗi\r\n    Route::group(['prefix' => 'check_error_link_logs'], function () {\r\n        Route::get('', '\\App\\CRMDV\\Controllers\\Admin\\DomainErrorLogController@getIndex')->name('check_error_link_logs');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\DomainErrorLogController@delete')->middleware('permission:check_error_link_logs');\r\n\r\n        Route::get('publish', '\\App\\CRMDV\\Controllers\\Admin\\DomainErrorLogController@getPublish')->name('check_error_link_logs.publish');\r\n        Route::get('delete/{id}', '\\App\\CRMDV\\Controllers\\Admin\\DomainErrorLogController@delete')->middleware('permission:check_error_link_logs');\r\n        Route::post('multi-delete', '\\App\\CRMDV\\Controllers\\Admin\\DomainErrorLogController@multiDelete')->middleware('permission:check_error_link_logs');\r\n    });\r\n});\r\n\r\n\r\nRoute::get('/admin/lead/edit', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@update')->middleware('get_permissions');\r\n\r\nRoute::get('admin/lead/view', '\\App\\CRMDV\\Controllers\\Admin\\LeadController@view');\r\nRoute::get('demo-wordpress', '\\App\\CRMDV\\Controllers\\Admin\\BillController@demoWordpress');\r\nRoute::get('demo-ldp', '\\App\\CRMDV\\Controllers\\Admin\\BillController@demoLdp');\r\nRoute::get('check-exist', '\\App\\CRMDV\\Controllers\\Admin\\AdminController@checkExist');\r\nRoute::get('cronjob/bill/get-nv-xuat-sac', '\\App\\CRMDV\\Controllers\\Admin\\BillController@getBestSale');\r\n\r\nRoute::get('nhac-nho-lau-khong-tuong-tac', function(Request $r) {\r\n    if ($r->role == 'telesale') {\r\n        $phut = 5;\r\n    } else {\r\n        $phut = 15;\r\n    }\r\n    //  5 phút không có tương tác nào thì thông báo ra màn hình\r\n    $count = \\Modules\\WebBill\\Models\\LeadContactedLog::where('admin_id', @$_GET['admin_id'])->where('created_at', '>', date('Y-m-d H:i:s', time() - $phut * 60))->count();\r\n    return response()->json([\r\n        'status' => true,\r\n        'thong_bao' => $count == 0 ? true : false\r\n    ]);\r\n});
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/CRMDV/routes/web.php b/app/CRMDV/routes/web.php
--- a/app/CRMDV/routes/web.php	(revision 3fa1c5682f5955e5e716e5ef707e5ddb89b055bb)
+++ b/app/CRMDV/routes/web.php	(date 1702634993946)
@@ -186,7 +186,6 @@
         Route::post('edit/{id}', '\App\CRMDV\Controllers\Admin\BillHistoryController@update');
 
     });
-
     //  Website  da lam
     Route::group(['prefix' => 'codes'], function () {
 
